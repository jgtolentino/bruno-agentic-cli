import{r as e,C as t,a as r,R as a}from"./chart-vendor-ed6dfd11.js";import{r as s}from"./ui-vendor-56bb4ba5.js";import{c as o}from"./core-vendor-0371540e.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var l={exports:{}},n={},i=e,c=Symbol.for("react.element"),d=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,m=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function x(e,t,r){var a,s={},o=null,l=null;for(a in void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(l=t.ref),t)h.call(t,a)&&!u.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===s[a]&&(s[a]=t[a]);return{$$typeof:c,type:e,key:o,ref:l,props:s,_owner:m.current}}n.Fragment=d,n.jsx=x,n.jsxs=x,l.exports=n;var g=l.exports,p={},y=s;function f(){const[t,r]=e.useState(!1);return g.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:g.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[g.jsxs("div",{className:"flex items-center",children:[g.jsx("img",{src:"/logo.svg",alt:"TBWA Retail Advisor",className:"h-8 mr-3",onError:e=>{e.target.onerror=null,e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiBmaWxsPSIjRkZDRjAwIi8+PC9zdmc+"}}),g.jsx("span",{className:"font-medium text-gray-900",children:"TBWA Retail Advisor"})]}),g.jsxs("nav",{className:"hidden md:flex space-x-6",children:[g.jsx("a",{href:"/",className:"text-sm font-medium text-gray-900 border-b-2 border-tbwa-yellow py-1",children:"Dashboard"}),g.jsx("a",{href:"/reports",className:"text-sm font-medium text-gray-500 hover:text-gray-900 py-1",children:"Reports"}),g.jsx("a",{href:"/analytics",className:"text-sm font-medium text-gray-500 hover:text-gray-900 py-1",children:"Analytics"}),g.jsx("a",{href:"/settings",className:"text-sm font-medium text-gray-500 hover:text-gray-900 py-1",children:"Settings"})]}),g.jsxs("div",{className:"relative",children:[g.jsxs("button",{className:"flex items-center text-sm font-medium text-gray-700 rounded-full focus:outline-none",onClick:()=>r(!t),children:[g.jsx("span",{className:"sr-only",children:"Open user menu"}),g.jsx("div",{className:"h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center text-gray-600",children:"TB"})]}),t&&g.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 ring-1 ring-black ring-opacity-5",children:[g.jsx("a",{href:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Your Profile"}),g.jsx("a",{href:"/settings",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Settings"}),g.jsx("a",{href:"/logout",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Sign out"})]})]})]})})}p.createRoot=y.createRoot,p.hydrateRoot=y.hydrateRoot;const v=o((e=>({dataSource:"simulated",isLoading:!1,data:null,error:null,filters:{date:"last30days",region:"all",category:"all"},setDataSource:t=>{e({dataSource:t,isLoading:!0}),setTimeout((()=>{"simulated"===t?e({data:j(),isLoading:!1,error:null}):fetch("/api/dashboard-data").then((e=>e.json())).then((t=>e({data:t,isLoading:!1,error:null}))).catch((t=>e({error:t.message,isLoading:!1})))}),800)},setFilter:(t,r)=>{e((e=>({filters:{...e.filters,[t]:r},isLoading:!0}))),setTimeout((()=>{e((e=>({data:j(e.filters),isLoading:!1})))}),400)},exportData:(e="csv")=>{const t=v.getState(),{data:r}=t;if(r)if("csv"===e){const e=function(e){let t="";t+="KPI,Value\n";for(const[r,a]of Object.entries(e.kpis))t+=`${r},${a}\n`;return t+="\n",t+="Region,Sales\n",e.salesByRegion.forEach((e=>{t+=`${e.region},${e.value}\n`})),t+="\n",t+="Category,Sales\n",e.salesByCategory.forEach((e=>{t+=`${e.category},${e.value}\n`})),t+="\n",t+="Month,Sales\n",e.salesTrend.forEach((e=>{t+=`${e.month},${e.value}\n`})),t}(r);b(e,"tbwa-dashboard-data.csv","text/csv")}else if("json"===e){b(JSON.stringify(r,null,2),"tbwa-dashboard-data.json","application/json")}else"excel"===e&&alert("Excel export would be implemented here with xlsx library")}})));function j(e={}){return{salesByRegion:[{region:"North",value:Math.floor(5e3*Math.random())+2e3},{region:"South",value:Math.floor(4e3*Math.random())+1e3},{region:"East",value:Math.floor(6e3*Math.random())+3e3},{region:"West",value:Math.floor(7e3*Math.random())+4e3}],salesByCategory:[{category:"Electronics",value:Math.floor(8e3*Math.random())+5e3},{category:"Clothing",value:Math.floor(6e3*Math.random())+3e3},{category:"Food",value:Math.floor(4e3*Math.random())+2e3},{category:"Home",value:Math.floor(5e3*Math.random())+1e3}],salesTrend:Array.from({length:12},((e,t)=>({month:new Date(2025,t,1).toLocaleString("default",{month:"short"}),value:Math.floor(1e4*Math.random())+5e3}))),kpis:{totalSales:Math.floor(1e6*Math.random())+5e5,averageOrder:Math.floor(200*Math.random())+50,customerCount:Math.floor(5e4*Math.random())+1e4,conversionRate:(10*Math.random()+2).toFixed(2)}}}function b(e,t,r){const a=new Blob([e],{type:r}),s=URL.createObjectURL(a),o=document.createElement("a");o.href=s,o.download=t,o.click(),URL.revokeObjectURL(s)}function N(){const{dataSource:e,setDataSource:t}=v();return g.jsxs("div",{className:"data-toggle",children:[g.jsx("button",{className:"data-toggle-option "+("simulated"===e?"data-toggle-option-selected":"data-toggle-option-unselected"),onClick:()=>t("simulated"),children:"Simulated"}),g.jsx("button",{className:"data-toggle-option "+("realtime"===e?"data-toggle-option-selected":"data-toggle-option-unselected"),onClick:()=>t("realtime"),children:"Real-time"})]})}function w(){const{data:r,filters:a,setFilter:s}=v(),o=e.useRef(null),l=e.useRef(null),n=e.useRef(null),i=e.useRef({salesByRegion:null,salesByCategory:null,salesTrend:null}),c="#FFCF00",d="rgba(255, 207, 0, 0.2)",h="#000000",m="#9CA3AF",u="#F3F4F6",[x,p]=e.useState(window.innerWidth);e.useEffect((()=>{const e=()=>{p(window.innerWidth),i.current.salesByCategory&&(i.current.salesByCategory.options.plugins.legend.position=window.innerWidth<=640?"bottom":"right",i.current.salesByCategory.update())};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[]),e.useEffect((()=>{if(r)return y(),()=>{Object.values(i.current).forEach((e=>{e&&e.destroy()}))}}),[r,x]);const y=()=>{if((null==r?void 0:r.salesByRegion)&&o.current){i.current.salesByRegion&&i.current.salesByRegion.destroy();const e=o.current.getContext("2d");i.current.salesByRegion=new t(e,{type:"bar",data:{labels:r.salesByRegion.map((e=>e.region)),datasets:[{label:"Sales by Region",data:r.salesByRegion.map((e=>e.value)),backgroundColor:c,borderColor:c,borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:h,titleColor:"#FFF",bodyColor:"#FFF",cornerRadius:4,padding:10}},scales:{y:{beginAtZero:!0,grid:{color:u}},x:{grid:{display:!1}}}}})}if((null==r?void 0:r.salesByCategory)&&l.current){i.current.salesByCategory&&i.current.salesByCategory.destroy();const e=l.current.getContext("2d");i.current.salesByCategory=new t(e,{type:"doughnut",data:{labels:r.salesByCategory.map((e=>e.category)),datasets:[{data:r.salesByCategory.map((e=>e.value)),backgroundColor:[c,d,m,u],borderColor:"#FFF",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:window.innerWidth<=640?"bottom":"right",labels:{boxWidth:15,padding:15}},tooltip:{backgroundColor:h,titleColor:"#FFF",bodyColor:"#FFF",cornerRadius:4,padding:10}},cutout:"70%"}})}if((null==r?void 0:r.salesTrend)&&n.current){i.current.salesTrend&&i.current.salesTrend.destroy();const e=n.current.getContext("2d");i.current.salesTrend=new t(e,{type:"line",data:{labels:r.salesTrend.map((e=>e.month)),datasets:[{label:"Monthly Sales",data:r.salesTrend.map((e=>e.value)),backgroundColor:d,borderColor:c,borderWidth:2,tension:.3,fill:!0,pointBackgroundColor:c,pointBorderColor:"#FFF",pointBorderWidth:2,pointRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:h,titleColor:"#FFF",bodyColor:"#FFF",cornerRadius:4,padding:10}},scales:{y:{beginAtZero:!0,grid:{color:u}},x:{grid:{display:!1}}}}})}};if(!r)return null;const f=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(e);return g.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[g.jsxs("div",{className:"chart-card",children:[g.jsx("div",{className:"chart-card-header",children:g.jsx("h3",{className:"chart-card-title",children:"Total Sales"})}),g.jsxs("div",{className:"chart-card-body flex flex-col items-center justify-center h-32",children:[g.jsx("div",{className:"text-3xl font-bold text-gray-900",children:f(r.kpis.totalSales)}),g.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Year to Date"})]})]}),g.jsxs("div",{className:"chart-card",children:[g.jsx("div",{className:"chart-card-header",children:g.jsx("h3",{className:"chart-card-title",children:"Average Order"})}),g.jsxs("div",{className:"chart-card-body flex flex-col items-center justify-center h-32",children:[g.jsx("div",{className:"text-3xl font-bold text-gray-900",children:f(r.kpis.averageOrder)}),g.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Per Transaction"})]})]}),g.jsxs("div",{className:"chart-card",children:[g.jsx("div",{className:"chart-card-header",children:g.jsx("h3",{className:"chart-card-title",children:"Customer Count"})}),g.jsxs("div",{className:"chart-card-body flex flex-col items-center justify-center h-32",children:[g.jsx("div",{className:"text-3xl font-bold text-gray-900",children:(j=r.kpis.customerCount,new Intl.NumberFormat("en-US",{style:"decimal",maximumFractionDigits:0}).format(j))}),g.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"Active Customers"})]})]}),g.jsxs("div",{className:"chart-card",children:[g.jsx("div",{className:"chart-card-header",children:g.jsx("h3",{className:"chart-card-title",children:"Conversion Rate"})}),g.jsxs("div",{className:"chart-card-body flex flex-col items-center justify-center h-32",children:[g.jsx("div",{className:"text-3xl font-bold text-gray-900",children:(e=>`${e}%`)(r.kpis.conversionRate)}),g.jsx("div",{className:"text-sm text-gray-500 mt-2",children:"From Visitors"})]})]}),g.jsxs("div",{className:"chart-card md:col-span-2",children:[g.jsxs("div",{className:"chart-card-header",children:[g.jsx("h3",{className:"chart-card-title",children:"Sales by Region"}),g.jsxs("div",{className:"filter-dropdown",children:[g.jsxs("select",{onChange:e=>s("region",e.target.value),value:a.region,className:"appearance-none bg-transparent border-none w-full py-0 px-0 pr-7 focus:outline-none text-xs",children:[g.jsx("option",{value:"all",children:"All Regions"}),g.jsx("option",{value:"north",children:"North"}),g.jsx("option",{value:"south",children:"South"}),g.jsx("option",{value:"east",children:"East"}),g.jsx("option",{value:"west",children:"West"})]}),g.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:g.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:g.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),g.jsx("div",{className:"chart-card-body h-64",children:g.jsx("canvas",{ref:o})})]}),g.jsxs("div",{className:"chart-card md:col-span-2",children:[g.jsxs("div",{className:"chart-card-header",children:[g.jsx("h3",{className:"chart-card-title",children:"Sales by Category"}),g.jsxs("div",{className:"filter-dropdown",children:[g.jsxs("select",{onChange:e=>s("category",e.target.value),value:a.category,className:"appearance-none bg-transparent border-none w-full py-0 px-0 pr-7 focus:outline-none text-xs",children:[g.jsx("option",{value:"all",children:"All Categories"}),g.jsx("option",{value:"electronics",children:"Electronics"}),g.jsx("option",{value:"clothing",children:"Clothing"}),g.jsx("option",{value:"food",children:"Food"}),g.jsx("option",{value:"home",children:"Home"})]}),g.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:g.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:g.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),g.jsx("div",{className:"chart-card-body h-64",children:g.jsx("canvas",{ref:l})})]}),g.jsxs("div",{className:"chart-card md:col-span-4",children:[g.jsxs("div",{className:"chart-card-header",children:[g.jsx("h3",{className:"chart-card-title",children:"Monthly Sales Trend"}),g.jsxs("div",{className:"filter-dropdown",children:[g.jsxs("select",{onChange:e=>s("date",e.target.value),value:a.date,className:"appearance-none bg-transparent border-none w-full py-0 px-0 pr-7 focus:outline-none text-xs",children:[g.jsx("option",{value:"last30days",children:"Last 30 Days"}),g.jsx("option",{value:"last90days",children:"Last 90 Days"}),g.jsx("option",{value:"lastYear",children:"Last Year"}),g.jsx("option",{value:"custom",children:"Custom Range"})]}),g.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:g.jsx("svg",{className:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:g.jsx("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})})})]})]}),g.jsx("div",{className:"chart-card-body h-64",children:g.jsx("canvas",{ref:n})})]})]});var j}function C(){const[t,r]=e.useState(!1),[a,s]=e.useState(!1),[o,l]=e.useState(""),{exportData:n}=v(),i=e.useRef(null),c=e=>{i.current&&!i.current.contains(e.target)&&r(!1)};e.useEffect((()=>(t?document.addEventListener("mousedown",c):document.removeEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)})),[t]),e.useEffect((()=>{if(a){const e=setTimeout((()=>{s(!1)}),2e3);return()=>clearTimeout(e)}}),[a]);const d=e=>{l(e),s(!0)};return g.jsxs("div",{className:"relative",ref:i,children:[g.jsxs("button",{className:"btn-outline flex items-center gap-1",onClick:()=>r(!t),children:[g.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Export"]}),t&&g.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 ring-1 ring-black ring-opacity-5 z-10",children:[g.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>{n("csv"),r(!1),d("CSV export complete")},children:"Export as CSV"}),g.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>{n("json"),r(!1),d("JSON export complete")},children:"Export as JSON"}),g.jsx("button",{className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>{n("excel"),r(!1),d("Excel export complete")},children:"Export as Excel"})]}),a&&g.jsx("div",{className:"fixed bottom-4 right-4 bg-black text-white px-4 py-2 rounded shadow-lg z-50 animate-fade-in",children:o})]})}function R(){const{dataSource:e,isLoading:t}=v();return g.jsxs("div",{className:"min-h-screen bg-gray-50",children:[g.jsx(f,{}),g.jsxs("main",{className:"container mx-auto px-4 py-6",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"TBWA Retail Advisor Dashboard"}),g.jsxs("div",{className:"flex gap-4 items-center",children:[g.jsx(N,{}),g.jsx(C,{})]})]}),t?g.jsx("div",{className:"flex justify-center items-center h-96",children:g.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-tbwa-yellow"})}):g.jsx(w,{})]}),g.jsx("footer",{className:"bg-gray-100 border-t border-gray-200 py-4",children:g.jsxs("div",{className:"container mx-auto px-4 text-sm text-gray-500",children:[g.jsxs("p",{children:["Data source: ","simulated"===e?"Simulated Data":"Real-time API"]}),g.jsx("p",{children:"Â© 2025 TBWA\\Retail. All rights reserved."})]})})]})}v.getState().setDataSource("simulated"),t.register(...r);p.createRoot(document.getElementById("root")).render(g.jsx(a.StrictMode,{children:g.jsx(R,{})}));
